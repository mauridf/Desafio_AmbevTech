2025-08-26 22:10:03.289 -03:00 [INF] Executed DbCommand (1,225ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [Desafio_AmbevTech];
2025-08-26 22:10:03.657 -03:00 [INF] Executed DbCommand (308ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [Desafio_AmbevTech] SET READ_COMMITTED_SNAPSHOT ON;
END;
2025-08-26 22:10:03.698 -03:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-26 22:10:03.707 -03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-08-26 22:10:03.850 -03:00 [INF] Executed DbCommand (140ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-08-26 22:10:03.967 -03:00 [INF] Executed DbCommand (63ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-08-26 22:10:03.985 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-08-26 22:10:03.999 -03:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-08-26 22:10:04.036 -03:00 [INF] Executed DbCommand (29ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-08-26 22:10:04.055 -03:00 [INF] Applying migration '20250827010937_InitialCreate'.
2025-08-26 22:10:04.085 -03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Sales] (
    [Id] uniqueidentifier NOT NULL,
    [SaleNumber] nvarchar(20) NOT NULL,
    [Date] datetime2 NOT NULL,
    [CustomerId] uniqueidentifier NOT NULL,
    [BranchId] uniqueidentifier NOT NULL,
    [Cancelled] bit NOT NULL,
    CONSTRAINT [PK_Sales] PRIMARY KEY ([Id])
);
2025-08-26 22:10:04.098 -03:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [SaleItems] (
    [Id] uniqueidentifier NOT NULL,
    [ProductId] uniqueidentifier NOT NULL,
    [Quantity] int NOT NULL,
    [UnitPrice] decimal(18,2) NOT NULL,
    [DiscountPercent] decimal(5,2) NOT NULL,
    [SaleId] uniqueidentifier NOT NULL,
    CONSTRAINT [PK_SaleItems] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_SaleItems_Sales_SaleId] FOREIGN KEY ([SaleId]) REFERENCES [Sales] ([Id]) ON DELETE CASCADE
);
2025-08-26 22:10:04.112 -03:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_SaleItems_SaleId] ON [SaleItems] ([SaleId]);
2025-08-26 22:10:04.137 -03:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250827010937_InitialCreate', N'9.0.8');
2025-08-26 22:10:04.152 -03:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-08-26 22:18:50.990 -03:00 [INF] Starting web host
2025-08-26 22:18:51.223 -03:00 [INF] User profile is available. Using 'C:\Users\mauri\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-26 22:18:51.840 -03:00 [INF] Request starting HTTP/2 GET https://localhost:44374/swagger - null null
2025-08-26 22:18:52.162 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-26 22:18:52.163 -03:00 [INF] Hosting environment: Development
2025-08-26 22:18:52.163 -03:00 [INF] Content root path: C:\Projetos\.NET\Desafio_AmbevTech\src\Desafio.Api
2025-08-26 22:18:53.316 -03:00 [INF] Request starting HTTP/2 GET https://localhost:44374/swagger/index.html - null null
2025-08-26 22:18:53.346 -03:00 [INF] Request finished HTTP/2 GET https://localhost:44374/swagger - 301 null null 1521.5613ms
2025-08-26 22:18:53.432 -03:00 [INF] Request finished HTTP/2 GET https://localhost:44374/swagger/index.html - 200 null text/html;charset=utf-8 117.6028ms
2025-08-26 22:18:53.518 -03:00 [INF] Request starting HTTP/2 GET https://localhost:44374/swagger/swagger-ui.css - null null
2025-08-26 22:18:53.525 -03:00 [INF] Request starting HTTP/2 GET https://localhost:44374/swagger/swagger-ui-bundle.js - null null
2025-08-26 22:18:53.529 -03:00 [INF] Request starting HTTP/2 GET https://localhost:44374/swagger/swagger-ui-standalone-preset.js - null null
2025-08-26 22:18:53.570 -03:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2025-08-26 22:18:53.572 -03:00 [INF] Request finished HTTP/2 GET https://localhost:44374/swagger/swagger-ui.css - 200 152034 text/css 54.4424ms
2025-08-26 22:18:53.573 -03:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2025-08-26 22:18:53.584 -03:00 [INF] Request finished HTTP/2 GET https://localhost:44374/swagger/swagger-ui-standalone-preset.js - 200 230280 text/javascript 54.6547ms
2025-08-26 22:18:53.635 -03:00 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2025-08-26 22:18:53.667 -03:00 [INF] Request finished HTTP/2 GET https://localhost:44374/swagger/swagger-ui-bundle.js - 200 1456926 text/javascript 144.3859ms
2025-08-26 22:18:53.709 -03:00 [INF] Request starting HTTP/2 GET https://localhost:44374/_framework/aspnetcore-browser-refresh.js - null null
2025-08-26 22:18:53.714 -03:00 [INF] Request finished HTTP/2 GET https://localhost:44374/_framework/aspnetcore-browser-refresh.js - 200 16507 application/javascript; charset=utf-8 3.8872ms
2025-08-26 22:18:53.728 -03:00 [INF] Request starting HTTP/2 GET https://localhost:44374/_vs/browserLink - null null
2025-08-26 22:18:53.895 -03:00 [INF] Request finished HTTP/2 GET https://localhost:44374/_vs/browserLink - 200 null text/javascript; charset=UTF-8 166.9409ms
2025-08-26 22:18:54.574 -03:00 [INF] Request starting HTTP/2 GET https://localhost:44374/swagger/v1/swagger.json - null null
2025-08-26 22:18:54.603 -03:00 [INF] Request finished HTTP/2 GET https://localhost:44374/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 29.863ms
2025-08-26 22:18:55.801 -03:00 [INF] Request starting HTTP/2 GET https://localhost:44374/swagger/favicon-32x32.png - null null
2025-08-26 22:18:55.803 -03:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2025-08-26 22:18:55.803 -03:00 [INF] Request finished HTTP/2 GET https://localhost:44374/swagger/favicon-32x32.png - 200 628 image/png 2.7695ms
2025-08-26 22:19:50.433 -03:00 [INF] Request starting HTTP/2 GET https://localhost:44374/api/v1/Sales - null null
2025-08-26 22:19:50.638 -03:00 [INF] Executing endpoint 'Desafio.Api.Controllers.SalesController.GetAll (Desafio.Api)'
2025-08-26 22:19:50.695 -03:00 [INF] Route matched with {action = "GetAll", controller = "Sales"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[Desafio.Application.DTOs.SaleDto]]] GetAll() on controller Desafio.Api.Controllers.SalesController (Desafio.Api).
2025-08-26 22:19:53.845 -03:00 [INF] Executed DbCommand (261ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[BranchId], [s].[Cancelled], [s].[CustomerId], [s].[Date], [s].[SaleNumber], [s0].[Id], [s0].[DiscountPercent], [s0].[ProductId], [s0].[Quantity], [s0].[SaleId], [s0].[UnitPrice]
FROM [Sales] AS [s]
LEFT JOIN [SaleItems] AS [s0] ON [s].[Id] = [s0].[SaleId]
ORDER BY [s].[Id]
2025-08-26 22:19:53.890 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[Desafio.Domain.Entities.Sale, Desafio.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[Desafio.Application.DTOs.SaleDto, Desafio.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-08-26 22:19:53.909 -03:00 [INF] Executed action Desafio.Api.Controllers.SalesController.GetAll (Desafio.Api) in 3209.5337ms
2025-08-26 22:19:53.910 -03:00 [INF] Executed endpoint 'Desafio.Api.Controllers.SalesController.GetAll (Desafio.Api)'
2025-08-26 22:19:53.912 -03:00 [INF] HTTP GET /api/v1/Sales responded 200 in 3473.6246 ms
2025-08-26 22:19:53.921 -03:00 [INF] Request finished HTTP/2 GET https://localhost:44374/api/v1/Sales - 200 null application/json; charset=utf-8 3487.619ms
